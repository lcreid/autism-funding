<%#= render partial: 'shared/flash_area', locals: { model: @cf0925 } %>

<%#= form_for([@funded_person,@invoice]) do |f| %>
<%= form_for(@invoice, url: @url) do |f| %>
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">
        Service Provider, Invoice Amount, Service Dates
      </h3>
    </div>
    <div class="panel-body" style="margin: 8px;">
      <div class="row">
        <div class="col-sm-6">
          <%= f.label 'Service Provider', {class: 'inv_label'} %>

          <% opt_list = prep_options false, @invoice.funded_person.cf0925s, :service_provider_name, ['', '-- Other Service Provider --', @invoice.service_provider_name] %>
          <%= f.select :service_provider_name, opt_list, {},{class: 'form-control'} %>

          <%#= f.collection_select :service_provider_name, Cf0925.all, :service_provider_name, :service_provider_name,{prompt: 'None Selected', include_blank: '-- Other Service Provider --'},{class: 'form-control'} %>
          <%= f.error_message_for(:service_provider_name,) %>
        </div>
        <div class="col-sm-6">
          <%= f.label 'Amount', {class: 'inv_label'} %>
          <%= f.number_field( :invoice_amount, {:step => '.01'}) %>
          <%= f.error_message_for(:invoice_amount) %>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4">
          <%= f.label 'Service Start', {class: 'inv_label'} %>
          <%= f.date_field :service_start %>
          <%= f.error_message_for(:service_start) %>
        </div>
        <div class="col-sm-4">
          <%= f.label 'Service End', {class: 'inv_label'} %>
          <%= f.date_field :service_end %>
          <%= f.error_message_for(:service_end) %>
        </div>
        <div class="col-sm-4">
        </div>
      </div>


<% #----- Pattern for checking layout (Diagnostic) ------------------------------- %>
            <div class="row">
            <% i = 100 # set i to 1 to show grids %>
            <% while i < 12 %>
              <div class="col-sm-1" style="background-color: blue; text-align: center; color: white;">
                <%= i %>
                <% i = i + 1 %>
              </div>
              <div class="col-sm-1" style="background-color: red; text-align: center; color: white;">
                <%= i %>
                <% i = i + 1 %>
              </div>
            <% end %>
            </div>
<% # - end of the check pattern ----------------------------------------------%>

        </div>
      </div>

      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">
            Invoice Date, Invoice Reference, Agency, Supplier, Notes
          </h3>
        </div>
        <div class="panel-body">
          <div class="row">
            <div class="col-sm-6">
              <%= f.label 'Invoice Date', {class: 'inv_label'} %>
              <%= f.date_field :invoice_date %>
              <%= f.error_message_for(:invoice_date) %>
            </div>
            <div class="col-sm-6">
              <%= f.label 'Invoice Reference', {class: 'inv_label'} %>
              <%= f.text_field :invoice_reference %>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <%= f.label 'Agency', {class: 'inv_label'} %>
              <% opt_list = prep_options false, @invoice.funded_person.cf0925s, :agency_name, ['', '-- Other Agency --', @invoice.agency_name] %>
              <%= f.select :agency_name, opt_list, {},{class: 'form-control'} %>

              <%#=  f.collection_select :agency_name, Cf0925.all, :agency_name, :agency_name,{prompt: 'None Selected', include_blank: '-- Other Agency --'},{class: 'form-control'}  %>
              <%= f.error_message_for(:agency_name) %>
            </div>
            <div class="col-sm-6">
              <%= f.label 'Supplier', {class: 'inv_label'} %>
              <% opt_list = prep_options false, @invoice.funded_person.cf0925s, :supplier_name, ['', '-- Other Supplier --', @invoice.supplier_name] %>
              <%= f.select :supplier_name, opt_list, {},{class: 'form-control'} %>
              <%#= f.collection_select :supplier_name, Cf0925.all, :supplier_name, :supplier_name,{prompt: 'None Selected', include_blank: '-- Other Supplier --'},{class: 'form-control'} %>
              <%= f.error_message_for(:supplier_name) %>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-12">
              <%= f.label 'Notes', {class: 'inv_label'} %>
              <%= f.text_field :notes, {size: 100} %>
            </div>
          </div>
        </div>
      </div>
  <%= f.submit 'Save' %>
<% end %>
